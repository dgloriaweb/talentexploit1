<?php
defined('BASEPATH') or exit('No direct script access allowed');

class Job_user extends MY_Controller
{
    public $person_id;

    public function __construct()
    {
        parent::__construct();
        //Loading url helper
        $this->load->helper('url');
        if (!$this->session->userdata('logged_in') && $this->uri->segment(1, '') !== 'register' && $this->uri->segment(2, '') !== 'store_user') {
            redirect('login');
        }
        $this->person_id = $this->session->userdata('person_id');

    }

    public function index()
    {
    }
    public function get_job()
    {
        $job_id = $this->uri->segment(3, 0);
        $data['job'] = $this->admin_jobs_model->get_job_by_id($job_id)[0];
        
        //get matching jobs using MY_Controller
        $array_licenses= $this->calculate_drivers_license_match($job_id);
        //get license name
        $data['licenses'] = $this->drivers_model->get_license_types_by_id($array_licenses);


        $array_skills = $this->calculate_skill_match($job_id);
        

        
        $this->load->view('job_user_view', $data);
    }

    public function delete()
    {
        //for items in the properties table:
        //DELETE FROM `properties` WHERE `prop_link_type` = 'drivers_license' and `prop_link_id` = 'driving_id' and `person_id` = 'person_id'

        //for items in the persons table
        // UPDATE `persons` SET `overtime`=[value-21],`nightshift`=[value-22],`other_shift`=[value-23],`weekdays`=[value-24],`saturday`=[value-25],`sunday`=[value-26],`bank_holidays`=[value-27] WHERE `person_id`=$person_id

    }

    public function add()
    {
        //for items in properties table:
        // INSERT INTO `properties`( `person_id`, `prop_link_id`, `prop_link_type`) VALUES ([value-1],[value-2],[value-3])

        //for items in the persons table
        // UPDATE `persons` SET `overtime`=[value-21],`nightshift`=[value-22],`other_shift`=[value-23],`weekdays`=[value-24],`saturday`=[value-25],`sunday`=[value-26],`bank_holidays`=[value-27] WHERE `person_id`=$person_id

    }

    
}
