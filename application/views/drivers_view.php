<?php include 'header.php';?>
<?= validation_errors(); ?>

<h1>Drivers' licenses</h1>
<div class="col-md-6">
	<table class="table table-striped">
		<tr>
			<th></th>
			<th>Drivers' license category</th>
			<th>Experience in years</th>
		</tr>
		<?php foreach ($person_licenses as $person_license): ?>
		<tr>
			<td><a href="<?=base_url('drivers/delete/'. $person_license->prop_id) ?>" class="badge badge-secondary"><i
						class="fa fa-trash"></i></a></td>
			<td><?=$person_license->drivers_license_type?></td>
			<td><?=$person_license->driving_years?></td>
		</tr>
		<?php endforeach?>

	</table>

	<!-- add new core skill link using a modal with a dropdown -->
	<button class="btn btn-primary view_detail">Add new license</button>
	<a href="<?= site_url('persons') ?>" class="btn btn-secondary">Close</a>
</div>

<!-- modal -->
<div id="show_modal" class="modal fade" role="dialog" >
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3> Add drivers' license</h3>
			</div>
			<?= form_open('drivers/add') ;?>

			<div class="modal-body">

				<!-- dropdown with the existing drivers.drivers_license_type-->
				<div><label for="driving_id">drivers license type</label>
				<select name="driving_id" id="driving_id">
					<?php foreach($license_types as $license_type):?>
					<option value=<?= $license_type->driving_id ?>><?= $license_type->drivers_license_type ?>
					</option>
					<?php endforeach ?>
				</select>
				</div>
				<!-- later we can add 95 and other such stuff if we need to  -->
				<!-- input field with the years of experience between 1 and 80 years -->
				<div><label for="driving_years">Experience in years</label>
				<input type="text" name="driving_years" />
				</div>
				<button type="submit" class="btn btn-success">Add license</button>
				<button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i>
					Close</button>
			</div>
			<?= form_close() ;?>
		</div>

	</div>
</div>



<!-- script for modal -->
<script type="text/javascript">
	$(document).ready(function () {
		$('.view_detail').click(function () {
			$('#show_modal').modal({
				backdrop: 'static',
				keyboard: true,
				show: true
			});
		});
	});

</script>

</div>
</body>

</html>
