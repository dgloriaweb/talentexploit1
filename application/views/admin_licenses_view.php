<?php include 'header.php';?>
<?=validation_errors();?>

<h1>Drivers' Licenses</h1>
<button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Add new drivers' license</button>

<?php foreach($drivers_licenses as $drivers_license) : ?>
    <div>
    <a class="update_license" relid_update="<?=$drivers_license->driving_id?>">
					<img src=<?=base_url("images/edit_s2.png")?> class="beaicons" data-toggle="tooltip"
						data-placement="left" title="Edit item">
				</a>
<?=$drivers_license->drivers_license ?>
</div>
    <?php endforeach ?>


    
<!-- 'add' modal -->
<div id="exampleModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3>Add Drivers' License</h3>
			</div>
			<?=form_open(site_url('admin_drivers_licenses/add_license'));?>
			<div class="modal-body">
				<input type="text" name="license_input">
		</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-danger" data-dismiss="modal"><i class="fa fa-times"></i>
					Close</button>
				<button type="submit" class="btn btn-success">Save changes</button>
			</div>
			<?=form_close();?>
		</div>
	</div>
</div>


<!-- update modal -->
<div id="show_modal_update" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3> Update license</h3>
			</div>
			<!-- add prop_id of this row -->
			<?=form_open('admin_drivers_licenses/update_license/'.$this->uri->segment(3, 0)) ;?>

			<div class="modal-body">

				<!-- input field with the years of experience between 1 and 80 years -->
				<div>
					<input class="form-control" type="text" id="license_input" name="license_input" />
					<input type="hidden" id="driving_id" name="driving_id" />
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success">Save changes</button>
					<button type="button" class="btn btn-danger" id="reset" data-dismiss="modal"><i class="fa fa-times"></i>
						Close</button>
				</div>
			</div>
			<?=form_close();?>
		</div>

	</div>
</div>



<!-- script for - update - modal -->
<script type="text/javascript">
	$(document).ready(function () {
		$('.update_license').click(function () {
			var id = $(this).attr('relid_update'); //get the attribute value
			$.ajax({
				url: "<?php echo base_url(); ?>admin_drivers_licenses/get_licenses",
				data: {
					id: id
				},
				type: "post",
				dataType: 'json',
				success: function (response) {
					$('#license_input').val(response.drivers_license);
					$('#driving_id').val(response.driving_id);
					$('#show_modal_update').modal({
						backdrop: 'static',
						keyboard: true,
						show: true
					});
				}
			});
		});
	});
</script>
</div> 
<?php include 'footer.php'; ?>
