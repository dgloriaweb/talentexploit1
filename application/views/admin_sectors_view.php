<?php include 'header.php';?>
<?=validation_errors();?>

<h1>Sectors</h1>
<table class="table" cellpadding='10'>

	<?php foreach ($sectors as $sector): ?>
	<tr>
		<td>
        <a href="admin_sectors/edit/<?= $sector->sector_id ?>"><i class="fa fa-edit"></i></a>

            <?=$sector->sector;?>
		</td>
	</tr>
	<?php endforeach ?>
</table>
<button class="btn btn-primary ">Add new
	sector</button>
<a href="<?=site_url('admin')?>" class="btn btn-secondary">Close</a>





<!-- update modal -->
<div id="show_modal_update" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h3> Update sector</h3>
			</div>
			<!-- add prop_id of this row -->
			<?=form_open('admin_sectors/edit/'.$this->uri->segment(3, 0)) ;?>

			<div class="modal-body">

				<!-- input field with the years of experience between 1 and 80 years -->
				<div><label for="sector">Edit sector </label>
					<input class="form-control" type="text" id="sector" name="sector" />
					<input type="hidden" id="sector_id" name="sector_id" />
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-success">Save changes</button>
					<button type="button" class="btn btn-danger" id="reset" data-dismiss="modal"><i
							class="fa fa-times"></i>
						Close</button>
				</div>
			</div>
			<?=form_close();?>
		</div>

	</div>
</div>


<!-- script for - update - modal -->
<script type="text/javascript">
	$(document).ready(function () {
		$('.update_sector').click(function () {
			var id = $(this).attr('relid_update'); //get the attribute value
			var url = $(location).attr('href').split("/");
			var segment = url[6];
			$.ajax({
				url: "<?php echo base_url(); ?>admin_sectors/get_sectors/" + segment,
				data: {
					id: id
				},
				type: "post",
				dataType: 'json',
				success: function (response) {
					$('#sector').val(response.sector_years);
					$('#sector_id').val(response.sector_id);
					$('#show_modal_update').modal({
						backdrop: 'static',
						keyboard: true,
						show: true
					});
				}
			});
		});
	});
</script>


</div> 
<?php include 'footer.php'; ?>
