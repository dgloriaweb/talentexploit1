<?php include 'header.php';?>
<?php if (!$this->session->userdata('logged_in')): ?>
<?= validation_errors(); ?>

Welcome. You are not logged in.<br />

<!-- here we need to check if user is logged in -->
<?php else: ?>
<?php $job_id = $job['job_id'] ?>
<?php $person_id = $this->session->userdata('person_id'); ?>
<br>
<h1>
	<?= $job['job_name'] ?> match: <?= $job_rate ?>%
</h1>
<br>
<h2>Job requirements</h2>
<br>


<!-- ***********************************************************  -->
<!-- *** work hour preferences *** -->
<!-- ***********************************************************  -->

<h3>Work hour preferences</h3>
<div class="container">

	<?=form_open("job_user/update_work_hour_preferences/".$job_id);?>
	<div class="row">
	<!-- left panel -->
	<div class="form-group col-lg-6">
		<div class="row">
			<div class="col col-md-3">
			</div>
			<div class="col col-md-3 text-center">
				Job requirement
			</div>
			<div class="col col-md-3 text-center">
				Your current settings
			</div>
			<div class="col col-md-3 text-center">
				Edit your settings
			</div>
		</div>

		<!-- remote -->
		<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
			<div class="col col-md-3">
				<b>Remote work</b>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($job['remote']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($user_work_hours['remote']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">

				<div class="custom-control custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="remote" name="remote"
						<?=($user_work_hours['remote']==1) ? 'checked' : ''?>>
					<label class="custom-control-label" for="remote"></label>
				</div>
			</div>
		</div>

		<!-- overtime -->
		<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
			<div class="col col-md-3">
				<b>Overtime</b>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($job['overtime']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($user_work_hours['overtime']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">

				<div class="custom-control custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="overtime" name="overtime"
						<?=($user_work_hours['overtime']==1) ? 'checked' : ''?>>
					<label class="custom-control-label" for="overtime"></label>
				</div>
			</div>
		</div>

		<!-- nightshift -->
		<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
			<div class="col col-md-3">
				<b>Nightshift</b>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($job['nightshift']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($user_work_hours['nightshift']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">

				<div class="custom-control custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="nightshift" name="nightshift"
						<?=($user_work_hours['nightshift']==1) ? 'checked' : ''?>>
					<label class="custom-control-label" for="nightshift"></label>
				</div>
			</div>
		</div>

		<!-- other_shift -->
		<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
			<div class="col col-md-3">
				<b>Other shift</b>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($job['other_shift']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">
				<?= ($user_work_hours['other_shift']==1) ? 'yes': 'no' ?>
			</div>
			<div class="col col-md-3 text-center">

				<div class="custom-control custom-checkbox">
					<input type="checkbox" class="custom-control-input" id="other_shift" name="other_shift"
						<?=($user_work_hours['other_shift']==1) ? 'checked' : ''?>>
					<label class="custom-control-label" for="other_shift"></label>
				</div>
			</div>
		</div>

	</div>
		<!-- end left panel -->

		<!-- right panel -->
		<div class="form-group col-lg-6">
			<div class="row">
				<div class="col col-md-3">
				</div>
				<div class="col col-md-3 text-center">
					Job requirement
				</div>
				<div class="col col-md-3 text-center">
					Your current settings
				</div>
				<div class="col col-md-3 text-center">
					Edit your settings
				</div>
			</div>

			<!-- weekdays -->
			<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
				<div class="col col-md-3">
					<b>Normal hours</b> 
				</div>
				<div class="col col-md-3 text-center">
					<?= ($job['weekdays']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($user_work_hours['weekdays']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">

					<div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="weekdays" name="weekdays"
							<?=($user_work_hours['weekdays']==1) ? 'checked' : ''?>>
						<label class="custom-control-label" for="weekdays"></label>
					</div>
				</div>
			</div>

			<!-- saturday -->
			<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
				<div class="col col-md-3">
					<b>Saturday</b>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($job['saturday']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($user_work_hours['saturday']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">

					<div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="saturday" name="saturday"
							<?=($user_work_hours['saturday']==1) ? 'checked' : ''?>>
						<label class="custom-control-label" for="saturday"></label>
					</div>
				</div>
			</div>

			<!-- sunday -->
			<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
				<div class="col col-md-3">
					<b>Sunday</b>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($job['sunday']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($user_work_hours['sunday']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">

					<div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="sunday" name="sunday"
							<?=($user_work_hours['sunday']==1) ? 'checked' : ''?>>
						<label class="custom-control-label" for="sunday"></label>
					</div>
				</div>
			</div>

			<!-- bank_holidays -->
			<div class="row" style="background-color: #515960; border: 1px solid #686868; padding:5px">
				<div class="col col-md-3">
					<b>Bank holidays</b>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($job['bank_holidays']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">
					<?= ($user_work_hours['bank_holidays']==1) ? 'yes': 'no' ?>
				</div>
				<div class="col col-md-3 text-center">

					<div class="custom-control custom-checkbox">
						<input type="checkbox" class="custom-control-input" id="bank_holidays" name="bank_holidays"
							<?=($user_work_hours['bank_holidays']==1) ? 'checked' : ''?>>
						<label class="custom-control-label" for="bank_holidays"></label>
					</div>
				</div>
			</div>


			<!-- save  -->
			<div class="row">
				<button class="btn btn-warning">Save changes</button>

			</div>

			<!-- end right panel -->
		</div>
		</div>
		<?=form_close();?>
	</div>
	



	<!-- ***********************************************************  -->
	<!-- *** END work hour preferences *** -->
	<!-- ***********************************************************  -->


	<!-- ***********************************************************  -->
	<!-- *** drivers licenses *** -->
	<!-- ***********************************************************  -->
	<h3>Drivers' Licenses</h3>
	<div class="container">
		<div class="row">
			<div class="col col-md-6">
				<div class="card border-primary mb-6" style="max-width: 40rem;">
					<div class="card-header">
						Matching
					</div>
					<div class="card-body">
						<?php if($intersect_licenses) : ?>
						<?php foreach ($intersect_licenses as $license):?>
						<div class="row">
							<div class="col col-md-9">
								<h5 class="card-title">Type: <?= $license['drivers_license'] ?></h5>
								<p class="card-text">Years required: <?= $license['driving_years'] ?>
							</div>
							<div class="col col-md-3">
								<a href=<?=base_url("job_user/delete_license/".$job_id."/".$license['driving_id']) ?>
									class="btn btn-info">remove</a> </p>
							</div>
						</div>
						<?php endforeach ?>
						<?php endif ?>
					</div>
				</div>
			</div>

			<div class="col col-md-6">
				<div class="card border-primary mb-6" style="max-width: 40rem;">
					<div class="card-header">
						Missing
					</div>
					<div class="card-body">
						<?php if($non_matching_licenses && $non_matching_licenses[0]['driving_id'] != 1) : ?>
						<?php foreach ($non_matching_licenses as $license):?>
						<div class="row">
							<div class="col col-md-10">
								<h5 class="card-title">Type: <?= $license['drivers_license'] ?></h5>
								<p class="card-text">Years required: <?= $license['driving_years'] ?>
							</div>
							<div class="col col-md-2">
								<a href=<?=base_url("job_user/add_license/".$job_id."/".$license['driving_id']."/".$license['driving_years']) ?>
									class="btn btn-info">add</a></p>
							</div>
						</div>
						<?php endforeach ?>
						<?php endif ?>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- ***********************************************************  -->
	<!-- *** END drivers licenses *** -->
	<!-- ***********************************************************  -->



	<!-- ***********************************************************  -->
	<!-- *** skills *** -->
	<!-- ***********************************************************  -->

	<h3>Skills</h3>
	<div class="container">
		<div class="row">
			<div class="col col-md-6">
				<div class="card border-primary mb-6" style="max-width: 40rem;">
					<div class="card-header">
						Matching
					</div>
					<div class="card-body">
						<?php if($intersect_skills) : ?>
						<?php foreach ($intersect_skills as $skill):?>
						<div class="row" style="border:1px solid #686868">
							<div class="col col-md-9">
								<p class="card-text"><?= $skill['skill'] ?>
							</div>
							<div class="col col-md-3">
								<a href=<?=base_url("job_user/delete_skill/".$job_id."/".$skill['skill_id']) ?>
									class="btn btn-info">remove</a></p>
							</div>
						</div>
						<?php endforeach ?>
						<?php endif ?>
					</div>
				</div>
			</div>

			<div class="col col-md-6">
				<div class="card border-primary mb-6" style="max-width: 40rem;">
					<div class="card-header">
						Missing
					</div>
					<div class="card-body">
						<?php if($non_matching_skills) : ?>
						<?php foreach ($non_matching_skills as $skill):?>
						<div class="row" style="border:1px solid #686868">
							<div class="col col-md-10">
								<p class="card-text"><?= $skill['skill'] ?>
							</div>
							<div class="col col-md-2">
								<a href=<?=base_url("job_user/add_skill/".$job_id."/".$skill['skill_id']) ?>
									class="btn btn-info">add</a></p>
							</div>
						</div>
						<?php endforeach ?>
						<?php endif ?>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- ***********************************************************  -->
	<!-- *** END skills *** -->
	<!-- ***********************************************************  -->




	<?php endif?>
	<?php include 'footer.php';?>
