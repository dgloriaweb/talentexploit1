<?php include 'header.php';?>
<?php include 'modals/skill_edit_modal.php';?>

<?php if (!$this->session->userdata('logged_in')): ?>

Welcome. You are not logged in.<br />

<!-- here we need to check if user is logged in -->
<?php else: ?>
	<input id="myInput" type="text" placeholder="Search.." autofocus><p>

<?php foreach ($core_skills as $core_skill): ?>
    <h4><?=$core_skill->core_skill?></h4>

	<?php foreach ($skills as $skill):
    if ($skill->core_skill_id == $core_skill->core_skill_id): ?>

		<table id='myTable' onclick='myFun(event)' cellpadding='10'>
		<tbody id="myTable">
			<tr>
				<td>
				 <button type="button" class="btn btn-sm view_detail" data-toggle="modal" data-target="#skill_edit_modal" relid="<?=$skill->skill_id;?>"><i class="fa fa-edit"></i></button>
				 <?=$skill->skill;?>
				</td>
			</tr>
		</tbody>
		</table>

		<?php endif;
endforeach;
endforeach;
?>
<?php endif;?>

<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>

<!-- script for the modal -->

<script>
	$(document).ready(function() {
		$('.view_detail').click(function(){
			var id = $(this).attr('relid'); //get the attribute value
			$.ajax({
				url : "<?php echo base_url(); ?>skills/get_skill_data",
				data:{id : id},
            	method:'GET',
        		dataType:'json',
            	success:function(response) {
					
				$('#skill').html(response[0].skill);
				$('#skill_edit_modal').modal({backdrop: 'static', keyboard: true, show: true});
			  }
			});
		});
	});

		</script>